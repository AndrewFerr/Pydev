<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>

<!--- launcher -->
<extension point="org.eclipse.debug.core.launchConfigurationTypes">
	<launchConfigurationType
        delegate="org.python.pydev.debug.ui.launching.RegularLaunchConfigurationDelegate"
        id="org.python.pydev.debug.regularLaunchConfigurationType"
        modes="run, debug"
        name="Python Run"
        public="true">
	</launchConfigurationType>
	<launchConfigurationType
        delegate="org.python.pydev.debug.ui.launching.CoverageLaunchConfigurationDelegate"
        id="org.python.pydev.debug.coverageLaunchConfigurationType"
        modes="run"
        name="Python Coverage"
        public="true">
	</launchConfigurationType>
	<launchConfigurationType
        delegate="org.python.pydev.debug.ui.launching.UnittestLaunchConfigurationDelegate"
        id="org.python.pydev.debug.unittestLaunchConfigurationType"
        modes="run"
        name="Python unittest"
        public="true">
	</launchConfigurationType>
    <launchConfigurationType
        delegate="org.python.pydev.debug.ui.launching.JythonLaunchConfigurationDelegate"
        id="org.python.pydev.debug.jythonLaunchConfigurationType"
        modes="run, debug"
        name="Jython run"
        public="true"
        sourceLocatorId="org.eclipse.jdt.launching.sourceLocator.JavaSourceLookupDirector"
        sourcePathComputerId="org.eclipse.jdt.launching.sourceLookup.javaSourcePathComputer">
     </launchConfigurationType>

</extension>
<!--- the launcher icon  -->
<extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
	<launchConfigurationTypeImage
		icon="icons/python.gif"
		configTypeID="org.python.pydev.debug.regularLaunchConfigurationType"
		id="org.python.pydev.debug.ui.launchConfigurationTypeImage">
	</launchConfigurationTypeImage>
	<launchConfigurationTypeImage
		icon="icons/python_coverage.gif"
		configTypeID="org.python.pydev.debug.coverageLaunchConfigurationType"
		id="org.python.pydev.debug.ui.launchConfigurationTypeImage">
	</launchConfigurationTypeImage>
	<launchConfigurationTypeImage
		icon="icons/python_unit.gif"
		configTypeID="org.python.pydev.debug.unittestLaunchConfigurationType"
		id="org.python.pydev.debug.ui.launchConfigurationTypeImage">
	</launchConfigurationTypeImage>
	<launchConfigurationTypeImage
		icon="icons/jython.gif"
		configTypeID="org.python.pydev.debug.jythonLaunchConfigurationType"
		id="org.python.pydev.debug.ui.launchConfigurationTypeImage">
	</launchConfigurationTypeImage>
</extension>
<!--- launcher tab group -->
<extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
	<launchConfigurationTabGroup
		type="org.python.pydev.debug.regularLaunchConfigurationType"
		class="org.python.pydev.debug.ui.PythonTabGroup"
		id="org.python.pydev.debug.ui.PythonTabGroup">
	</launchConfigurationTabGroup>
	<launchConfigurationTabGroup
		type="org.python.pydev.debug.coverageLaunchConfigurationType"
		class="org.python.pydev.debug.ui.PythonTabGroup"
		id="org.python.pydev.debug.ui.PythonTabGroup">
	</launchConfigurationTabGroup>
	<launchConfigurationTabGroup
		type="org.python.pydev.debug.unittestLaunchConfigurationType"
		class="org.python.pydev.debug.ui.PythonTabGroup"
		id="org.python.pydev.debug.ui.PythonTabGroup">
	</launchConfigurationTabGroup>
	<launchConfigurationTabGroup
		type="org.python.pydev.debug.jythonLaunchConfigurationType"
		class="org.python.pydev.debug.ui.JythonTabGroup"
		id="org.python.pydev.debug.ui.JythonTabGroup">
	</launchConfigurationTabGroup>
</extension>

<!--- launcher pop up over a python file -->
<!--- launch shortcuts -->
<extension point="org.eclipse.debug.ui.launchShortcuts">
	<shortcut
		label="Python Run"
		icon="icons/python.gif"
		modes="run, debug"
		class="org.python.pydev.debug.ui.launching.LaunchShortcut"
		id="org.python.pydev.debug.ui.launchShortcut">
		<perspective id="org.eclipse.debug.ui.DebugPerspective"/>
		<!--this adds it to run-as (taken from \eclipse\plugins\org.eclipse.jdt.junit_3.0.1) -->
        <contextualLaunch>
           <enablement>
              <with variable="selection">
                 <count value="1"/>
           		 <iterate>
           		 	<or>
               		    <test property="org.eclipse.debug.ui.matchesPattern" value="*.py"/>
               		    <test property="org.eclipse.debug.ui.matchesPattern" value="*.pyw"/>
               		</or>
           		 </iterate>
              </with>
           </enablement>
        </contextualLaunch>
	</shortcut>
	<shortcut
		label="Jython Run"
		icon="icons/jython.gif"
		modes="run, debug"
		class="org.python.pydev.debug.ui.launching.JythonLaunchShortcut"
		id="org.python.pydev.debug.ui.jythonLaunchShortcut">
		<!--this adds it to run-as (taken from \eclipse\plugins\org.eclipse.jdt.junit_3.0.1) -->
        <contextualLaunch>
           <enablement>
              <with variable="selection">
                 <count value="1"/>
           		 <iterate>
           		 	<or>
               		    <test property="org.eclipse.debug.ui.matchesPattern" value="*.py"/>
               		    <test property="org.eclipse.debug.ui.matchesPattern" value="*.pyw"/>
               		</or>
           		 </iterate>
              </with>
           </enablement>
        </contextualLaunch>
	</shortcut>
	<shortcut
		label="Python Coverage"
		icon="icons/python_coverage.gif"
		modes="run"
		class="org.python.pydev.debug.ui.launching.CoverageLaunchShortcut"
		id="org.python.pydev.debug.ui.launchShortcut">
		<!--this adds it to run-as (taken from \eclipse\plugins\org.eclipse.jdt.junit_3.0.1) -->
        <contextualLaunch>
           <enablement>
              <with variable="selection">
                 <count value="1"/>
           		 <iterate>
           		 	<or>
               		    <test property="org.eclipse.debug.ui.matchesPattern" value="*.py"/>
               		    <test property="org.eclipse.debug.ui.matchesPattern" value="*.pyw"/>
               		    <instanceof value="org.eclipse.core.resources.IFolder" />
               		</or>
           		 </iterate>
              </with>
           </enablement>
        </contextualLaunch>
	</shortcut>
	<shortcut
		label="Python unit-test"
		icon="icons/python_unit.gif"
		modes="run"
		class="org.python.pydev.debug.ui.launching.UnitTestLaunchShortcut"
		id="org.python.pydev.debug.ui.launchShortcut">
        <contextualLaunch>
           <enablement>
              <with variable="selection">
                 <count value="1"/>
           		 <iterate>
           		 	<or>
               		    <test property="org.eclipse.debug.ui.matchesPattern" value="*.py"/>
               		    <test property="org.eclipse.debug.ui.matchesPattern" value="*.pyw"/>
               		    <instanceof value="org.eclipse.core.resources.IFolder" />
               		</or>
           		 </iterate>
              </with>
           </enablement>
        </contextualLaunch>
	</shortcut>
</extension>

<!--- CONTRIBUTED VIEWS -->
<extension point="org.eclipse.ui.views">
   <category
        name="Pydev"
        id="org.python.pydev.debug"/>
   <view
        class="org.python.pydev.debug.codecoverage.PyCodeCoverageView"
        icon="icons/python_coverage.gif"
        category="org.python.pydev"
        name="Code Coverage Results View"
        id="org.python.pydev.views.PyCodeCoverageView"/>
   <!--- removed until the implementation is improved 
   <view
        icon="icons/python.gif"
        class="org.python.pydev.debug.unittest.TestReportView"
        category="org.python.pydev"
        name="Unit Test Report View"
        id="org.python.pydev.debug.views.TestReportView"/>
   -->
</extension>

<!--- console line tracking -->
<extension 
	point="org.eclipse.debug.ui.consoleLineTrackers">
	<consoleLineTracker
		class="org.python.pydev.debug.ui.PythonConsoleLineTracker"
		processType="PYDEV.PYTHON"
		id="org.python.pydev.debug.ui.PythonConsoleLineTracker">
	</consoleLineTracker>
</extension>
<extension 
	point="org.eclipse.debug.ui.consoleLineTrackers">
	<consoleLineTracker
		class="org.python.pydev.debug.ui.PythonConsoleLineTracker"
		processType="java"
		id="org.python.pydev.debug.ui.PythonConsoleLineTracker">
	</consoleLineTracker>
</extension>
   
<!-- DEBUGGING -->
<!-- breakpoint ruler action -->
<extension point="org.eclipse.ui.editorActions">
	<editorContribution
		id="org.python.pydev.debug.BreakpointRulerActions"
		targetID="org.python.pydev.editor.PythonEditor">
		<action
			id="org.python.pydev.debug.BreakpointRulerAction"
			actionID="RulerDoubleClick"
			label="Add breakpoint"
			class="org.python.pydev.debug.ui.actions.ManageBreakpointRulerActionDelegate">
		</action>
	</editorContribution>
</extension>

<!-- popup menu -->
<extension point="org.eclipse.ui.popupMenus">
	<viewerContribution 
    	id="org.python.pydev.debug.PyEditPopupActions" 
    	targetID="#TextRulerContext">
<!--    	<action
			id="org.python.pydev.actions.JavaBreakpointPropertiesRulerActionDelegate"
			label="Breakpoint properties"
			menubarPath="debug"
			class="org.eclipse.jdt.internal.debug.ui.actions.JavaBreakpointPropertiesRulerActionDelegate">
		</action>
    	<action
			id="org.eclipse.jdt.ui.actions.EnableDisableBreakpointRulerActionDelegate"
			label="Enable breakpoint"
			menubarPath="debug"
			helpContextId="enable_disable_breakpoint_action_context"
			class="org.eclipse.jdt.internal.debug.ui.actions.EnableDisableBreakpointRulerActionDelegate">
		</action> -->
		<action
			id="org.eclipse.jdt.ui.actions.ManageBreakpointRulerActionDelegate"
			label="Add Breakpoint"
			menubarPath="debug"
			class="org.python.pydev.debug.ui.actions.ManageBreakpointRulerActionDelegate">
		</action>
	</viewerContribution>
	
	<viewerContribution 
    	id="org.python.pydev.debug.WatchExpression" 
    	targetID="#PyEditContext">
		<action
               label="Watch"
               class="org.python.pydev.debug.ui.actions.WatchExpressionAction"
               menubarPath="org.python.pydev.editor.watchexpression"
               icon="icons/watch_exp.gif"
               id="org.python.pydev.debug.ui.actions.WatchExpression">
         </action>
	</viewerContribution>
</extension>

<!-- breakpoints
	need a marker to mark the breakpoint
	breakpoint associated with marker for BreakpointManager
	marker image provider to provide name for the marker
-->
<!-- org.eclipse.debug.core.breakpointMarker -->		
<extension 
	point="org.eclipse.core.resources.markers"
	id="pyStopBreakpointMarker">
	<super type="org.eclipse.debug.core.lineBreakpointMarker"/>
	<persistent value="true"/>
</extension>
<extension 
	point="org.eclipse.debug.core.breakpoints">
	<breakpoint id="pythonStopBreakpoint"
		markerType="org.python.pydev.debug.pyStopBreakpointMarker"
		class="org.python.pydev.debug.model.PyBreakpoint"/>
</extension>

<extension
	point="org.eclipse.ui.ide.markerImageProviders">
	<imageprovider id="pythonBreakPointImage"
		markertype="org.python.pydev.debug.pyStopBreakpointMarker"
		icon="icons/breakmarker.gif"/>
</extension>

<extension point = "org.eclipse.debug.ui.debugModelPresentations"> 
	<debugModelPresentation
		class = "org.python.pydev.debug.model.PyDebugModelPresentation"
		id = "org.python.pydev.debug">
	</debugModelPresentation>
</extension>

<extension point="org.eclipse.debug.core.watchExpressionDelegates">
	<watchExpressionDelegate 
		debugModel="org.python.pydev.debug"
		delegateClass="org.python.pydev.debug.model.PyWatchExpressionDelegate"/>
</extension>

</plugin>

